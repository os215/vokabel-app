<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover,user-scalable=no" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Vokabel" />
  <title>Vokabel Trainer</title>
  <meta name="theme-color" content="#4F46E5" />
  <meta name="build-version" th:content="${buildVersion}" />
  <meta name="build-date" th:content="${#temporals.format(buildDate, 'yyyy-MM-dd''T''HH:mm:ss''Z''')}" />
  <link rel="stylesheet" href="/styles.css" />
  <link rel="manifest" href="/manifest.json">
  <link rel="apple-touch-icon" href="/icon-180.png">
  <link rel="icon" href="/icon-192.png">
  <script th:inline="javascript">
    /*<![CDATA[*/
    window.isPowerUser = /*[[${isPowerUser}]]*/ false;
    /*]]>*/
  </script>
</head>
<body>
  <!-- Header with title and list selector -->
  <header class="app-header">
    <h1>ğŸ“š Vokabel Trainer</h1>
    <div class="header-controls">
      <select id="listSelector" class="list-selector">
        <option value="">Lade Listen...</option>
      </select>
      <button id="newListBtn" class="icon-btn" title="Neue Liste" th:if="${isPowerUser}">+</button>
    </div>
  </header>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <button class="nav-btn active" data-tab="practice">
      <span class="nav-icon">âœï¸</span>
      <span class="nav-label">Ãœben</span>
    </button>
    <button class="nav-btn" data-tab="add" th:if="${isPowerUser}">
      <span class="nav-icon">â•</span>
      <span class="nav-label">HinzufÃ¼gen</span>
    </button>
    <button class="nav-btn" data-tab="list">
      <span class="nav-icon">ğŸ“‹</span>
      <span class="nav-label">Liste</span>
    </button>
    <button class="nav-btn" data-tab="info">
      <span class="nav-icon">âš™ï¸</span>
      <span class="nav-label">Info</span>
    </button>
    <button class="nav-btn" th:if="${isPowerUser}" onclick="window.location.href='/users'">
      <span class="nav-icon">ğŸ‘¥</span>
      <span class="nav-label">Benutzer</span>
    </button>
  </nav>

  <!-- Main Content Area -->
  <main class="app-content">
    
    <!-- Practice Panel -->
    <section class="content-panel active" data-panel="practice">
      <div id="practiceSetup">
        <div class="welcome-card">
          <h2>Bereit zum Lernen?</h2>
          <p class="stats-summary" id="statsSummary">WÃ¤hle eine Liste aus</p>
          <label class="toggle-control">
            <input type="checkbox" id="reverseToggle" />
            <span>ğŸ”„ Umgekehrt Ã¼ben (Deutsch â†’ Original)</span>
          </label>
          <button id="startPractice" class="btn-primary btn-large">Jetzt starten</button>
        </div>
      </div>

      <div id="practiceCard" class="practice-card" style="display:none">
        <div class="progress-bar">
          <div class="progress-fill" id="progressBar"></div>
        </div>
        <div class="card-content">
          <div id="cardWord" class="word-display"></div>
          <input id="answer" class="answer-input" placeholder="Deine Antwort..." autocomplete="off" />
        </div>
        <div id="feedback" class="feedback"></div>
        <div class="card-footer">
          <div id="stats" class="stats-text"></div>
          <div class="practice-actions">
            <button id="check" class="btn-primary">PrÃ¼fen</button>
            <button id="markCorrect" class="btn-secondary" style="display:none">Das stimmt</button>
            <button id="next" class="btn-secondary">Weiter</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Add Word Panel -->
    <section class="content-panel" data-panel="add" th:if="${isPowerUser}">
      <div class="form-card">
        <h2>Neue Vokabel</h2>
        <form id="addForm">
          <div class="form-group">
            <label for="word">Wort (Original)</label>
            <input id="word" type="text" placeholder="z.B. apple" required autocomplete="off" />
          </div>
          <div class="form-group">
            <label for="translation">Ãœbersetzung</label>
            <input id="translation" type="text" placeholder="z.B. Apfel" required autocomplete="off" />
          </div>
          <button type="submit" class="btn-primary btn-large">HinzufÃ¼gen</button>
        </form>
      </div>
    </section>

    <!-- List Panel -->
    <section class="content-panel" data-panel="list">
      <div class="list-card">
        <h2>Meine Vokabeln</h2>
        <ul id="list" class="vocab-list"></ul>
      </div>
    </section>

    <!-- Info Panel -->
    <section class="content-panel" data-panel="info">
      <div class="form-card">
        <h2>Informationen</h2>
        <div class="form-group">
          <label for="userEmail">Deine E-Mail</label>
          <input id="userEmail" type="text" th:value="${usermail}" readonly />
        </div>
        <div class="form-group">
          <label for="userRole">Rolle</label>
          <input id="userRole" type="text" th:value="${isPowerUser ? 'Hauptbenutzer (Vollzugriff)' : 'Besucher (Lesezugriff)'}" readonly />
        </div>
          <div class="form-group">
              <label for="buildVersion">Build Version</label>
              <input id="buildVersion" type="text" th:value="${buildVersion}" readonly />
          </div>
          <div class="form-group">
              <label for="buildDate">Build Date</label>
              <input id="buildDate" type="text" th:value="${#temporals.format(buildDate, 'dd.MM.yyyy'' ''HH:mm:ss')}" readonly />
          </div>
      </div>
    </section>

  </main>

  <script th:src="@{/app.js}"></script>

</body>
</html>
